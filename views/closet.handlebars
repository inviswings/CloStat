<!DOCTYPE html>
<html>

<head>
	<title>Closet</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="css/style.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.10/css/all.css" integrity="sha384-+d0P83n9kaQMCwj8F4RJB66tzIwOKmrdb46+porD/OvrJ+37WqIM7UoBtwHO6Nlg" crossorigin="anonymous">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<script type="text/javascript" src="https://code.jquery.com/jquery-1.7.1.min.js"></script>
	<script type="text/javascript">
		$(document).ready(() =>{
			console.log("jQuery on");
			let clickTime=true;

				$.ajax({
					url: '/tops',
					type: 'GET',
					dataType: 'json',
					success: (data) =>{
						console.log('ajax success', data);


						$('.percentage').attr('src','/images/Stas.jpg');
						//$('#percentNumber').html('63%');
						//$('#items').html('{{#each data}} <h2 class="list">{{name}}</h2>{{/each}}');
						for(const item of data) {
							if (item.status=='clean') {
							$('#items').append(`<h4 class="list">${item.name}</h4>`);
						}
					}
				}

				})
				clickTime=false;

			$('#filter').click(() => {
				console.log('dirty');
				var myNode = document.getElementById("items");
				myNode.innerHTML = '';
				if (!clickTime) {

				$.ajax({
					url: '/tops',
					type: 'GET',
					dataType: 'json',
					success: (data) =>{
						console.log('ajax success', data);
						$('.percentage ').attr('src','/images/washing.jpg');
						//$('#percentNumber').html('37%');
						//$('#items').html('{{#each topsDirtty}} <h2 class="list">{{name}}</h2>{{/each}}');
						for(const item of data) {
							if (item.status=='dirty') {
							$('#items').append(`<h4 class="list">${item.name}</h4>`);
						}
					}
				}
				})
				clickTime=true;
			}
			else {
				$.ajax({
					url: '/tops',
					type: 'GET',
					dataType: 'json',
					success: (data) =>{
						console.log('ajax success', data);


						$('.percentage').attr('src','/images/Stas.jpg');
						//$('#percentNumber').html('63%');
						//$('#items').html('{{#each data}} <h2 class="list">{{name}}</h2>{{/each}}');
						for(const item of data) {
							if (item.status=='clean') {
							$('#items').append(`<h4 class="list">${item.name}</h4>`);
						}
					}
				}

				})
				clickTime=false;

			}
			})

		})

	</script>

</head>
	<body>
		<div class="container">
	    <i id="filter" class="fas fa-filter" style="font-size:24px;float:left;margin-top:5%"></i>
			<h1>ClothStat</h1>
			<a href="/add"><i class="fa fa-plus" style="font-size:24px;margin-left:95%;color:black"></i></a>
			<h1>Closet</h1>
			<img class="percentage"src="/images/Stas.jpg">
			<br><br><br>
			<div id="items"></div>
		</div>

		<div class="icon-bar">
			<a href="/closet"><i class="fas fa-bath"></i></a>
			<a href="/"><i class="fas fa-sun"></i></a>
			<a href="/stat"><i class="far fa-chart-bar"></i></a>
		</div>
	</body>
</html>
